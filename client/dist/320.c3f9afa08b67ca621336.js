"use strict";(self.webpackChunkfda_recalls=self.webpackChunkfda_recalls||[]).push([[320],{1320:(e,n,t)=>{t.r(n),t.d(n,{default:()=>se});var r,a=t(3357),l=t(6540),o=t(8099),i=t(8221),s=t.n(i),c=t(4353),u=t.n(c),m=t(2183),d=t(9708);var p,f,g,h=(0,d.J1)(r||(p=["\n\tquery GetStateBounds {\n\t\tstateBounds {\n\t\t\ttype\n\t\t\tfeatures {\n\t\t\t\ttype\n\t\t\t\tproperties\n\t\t\t\tgeometry {\n\t\t\t\t\ttype\n\t\t\t\t\tcoordinates\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"],f||(f=p.slice(0)),r=Object.freeze(Object.defineProperties(p,{raw:{value:Object.freeze(f)}}))));var v=(0,d.J1)(g||(g=function(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}(["\n\tquery GetRecalls($startDate: String!, $endDate: String!, $limit: Int) {\n\t\trecalls(startDate: $startDate, endDate: $endDate, limit: $limit) {\n\t\t\ttotal_results\n\t\t\tstateGroups\n\t\t\tresults {\n\t\t\t\tclassification\n\t\t\t\tdistribution_pattern\n\t\t\t\trecalling_firm\n\t\t\t\tproduct_description\n\t\t\t\treason_for_recall\n\t\t\t\trecall_initiation_date\n\t\t\t\trecall_number\n\t\t\t\tstatus\n\t\t\t}\n\t\t}\n\t}\n"]))),b=t(1749),y=t(4073);function A(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l,o,i=[],s=!0,c=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=l.call(t)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return E(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?E(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}const x=function(e){var n=e.component,t=e.text,r=A(l.useState(null),2),a=r[0],o=r[1],i=function(){o(null)},s=Boolean(a);return l.createElement(l.Fragment,null,l.createElement(y.A,{"aria-owns":s?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:function(e){o(e.currentTarget)},onMouseLeave:i},n),l.createElement(b.Ay,{id:"mouse-over-popover",sx:{pointerEvents:"none"},open:s,anchorEl:a,disableScrollLock:!0,hideBackdrop:!0,style:{overflowY:"visible"},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:i},l.createElement(y.A,{sx:{p:1}},t)))};var I=t(6711),S=(t(2274),t(728)),w=t(8411),M=t(2511),N=t(7120),D=t(3481),C=t.n(D);const O=t.p+"src/assets/apple_I.png",k=t.p+"src/assets/apple_II.png",j=t.p+"src/assets/apple_III.png";var z=C().icon({iconUrl:O,iconSize:[15,15],iconAnchor:[7.5,15],popupAnchor:[0,-15]}),Y=C().icon({iconUrl:k,iconSize:[15,15],iconAnchor:[7.5,15],popupAnchor:[0,-15]}),_=C().icon({iconUrl:j,iconSize:[15,15],iconAnchor:[7.5,15],popupAnchor:[0,-15]});const T=function(e){switch(e){case"Class I":return z;case"Class II":return Y;default:return _}};var L=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];const V=function(e){if(!e)return[];if(e.includes("Nationwide")||e.includes("US"))return L;return e.match(/\b([A-Z]{2})\b/g)||[]};const W=function(e){var n={};return null==e||e.forEach((function(e){V(e.distribution_pattern).forEach((function(t){n[t]||(n[t]={"Class I":[],"Class II":[],"Class III":[]}),n[t][e.classification].push(e)}))})),n};var P=t(1818),R=t(5072),B=t.n(R),H=t(1591),K={insert:"head",singleton:!1};B()(H.A,K);H.A.locals;const U=function(e){var n=e.state,t=e.classification,r=e.recalls;return l.createElement(P.z,{className:"recall-popup"},l.createElement("h4",null,n," - ",t),l.createElement("p",null,l.createElement("strong",null,"Total Recalls: ",r.length)),l.createElement("div",{className:"recall-list"},r.slice(0,5).map((function(e,n){return l.createElement("div",{key:n,className:"recall-item"},l.createElement("h4",null,e.recalling_firm),l.createElement("p",null,e.product_description),l.createElement("p",null,l.createElement("strong",null,"Reason:")," ",e.reason_for_recall))})),r.length>5&&l.createElement("p",{className:"more-recalls"},"+ ",r.length-5," more recalls...")))};var $=t(1755),F={insert:"head",singleton:!1};B()($.A,F);$.A.locals;function G(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l,o,i=[],s=!0,c=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=l.call(t)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return J(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?J(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}const Z=function(e){var n,t=e.recalls,r=void 0===t?[]:t,a=e.stateBoundsData,o=e.selectedClassifications,i=e.setExpandedState;delete C().Icon.Default.prototype._getIconUrl;var s=(0,l.useMemo)((function(){return W(r)}),[r]);return l.createElement(l.Fragment,null,l.createElement(w.e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),(null==a||null===(n=a.features)||void 0===n?void 0:n.length)>0&&l.createElement(M.k,{data:a,style:S.HV,onEachFeature:function(e,n){e.properties&&(n.bindPopup(e.properties.name),n.on({mouseover:function(e){e.target.setStyle(S.C4)},mouseout:function(e){e.target.setStyle(S.HV)},click:function(n){n.target._map.flyToBounds(n.target.getBounds(),{duration:1.5,easeLinearity:.25}),i(e.properties.name)}}))}},s&&Object.entries(s||{}).map((function(e){var n=G(e,2),t=n[0],r=n[1],a=S.$n[t];return a?Object.entries(r||{}).map((function(e,n){var i=G(e,2),s=i[0],c=i[1];if(!c||0===c.length||!o[s])return null;var u=function(e,n,t){var r=Array.isArray(e)?e[0]:e.lat,a=Array.isArray(e)?e[1]:e.lng;if(1===t)return[r,a];var l=2*Math.PI*n/t;return[r+.25*Math.cos(l),a+.25*Math.sin(l)]}(a,n,Object.keys(r||{}).length);return u?l.createElement(N.p,{key:"".concat(t,"-").concat(s,"-").concat(n),position:u,icon:T(s)},l.createElement(U,{state:t,classification:s,recalls:c})):null})):null}))))};const q=function(e){var n=e.recalls,t=e.stateBoundsData,r=e.selectedClassifications,a=e.setExpandedState,o=e.loadingRecallData;return n&&0!==n.length||o?l.createElement("div",{className:"recall-map-container"},l.createElement(I.W,{className:"recall-map",center:S.t1,zoom:S.aM,minZoom:S.DQ},l.createElement(Z,{recalls:n,stateBoundsData:t,selectedClassifications:r,setExpandedState:a}))):l.createElement("div",null,"No recalls found.")};var Q=t(5963),X={insert:"head",singleton:!1};B()(Q.A,X);Q.A.locals;function ee(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l,o,i=[],s=!0,c=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=l.call(t)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return ne(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ne(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var te=(0,l.lazy)((function(){return Promise.all([t.e(850),t.e(828),t.e(152)]).then(t.bind(t,4152))})),re=(0,l.lazy)((function(){return Promise.all([t.e(850),t.e(202),t.e(828),t.e(978),t.e(762)]).then(t.bind(t,762))})),ae=(0,l.lazy)((function(){return Promise.all([t.e(850),t.e(202),t.e(378)]).then(t.bind(t,5378))})),le=(0,l.lazy)((function(){return t.e(285).then(t.bind(t,7285))})),oe=u()(),ie=oe.subtract(30,"day");const se=function(){var e,n,t,r=ee((0,l.useState)(ie),2),i=r[0],c=r[1],u=ee((0,l.useState)(oe),2),d=u[0],p=u[1],f=ee((0,l.useState)(10),2),g=f[0],b=f[1],y=ee((0,l.useState)(!1),2),A=y[0],E=y[1],I=ee((0,l.useState)(null),2),S=I[0],w=I[1],M=ee((0,l.useState)({"Class I":!0,"Class II":!0,"Class III":!0}),2),N=M[0],D=M[1],C=(0,o.IT)(v,{variables:{startDate:i.format("YYYYMMDD"),endDate:d.format("YYYYMMDD"),limit:parseInt(g)}}),O=C.loading,k=C.data,j=(0,o.IT)(h),z=j.data,Y=(void 0===z?{}:z).stateBounds,_=(j.loading,(0,l.useMemo)((function(){var e;return((null==k||null===(e=k.recalls)||void 0===e?void 0:e.results)||[]).filter((function(e){return 0===Object.keys(N).length||Object.keys(N).includes(e.classification)}))}),[null==k||null===(e=k.recalls)||void 0===e?void 0:e.results,N])),T=(0,l.useMemo)((function(){return s()((function(e){b(e)}),500)}),[]),L=(0,l.useMemo)((function(){return s()((function(e,n){c(e),p(n)}),500)}),[]);return l.createElement("div",{className:"fda-recalls"},l.createElement("div",{className:"recalls-header"},l.createElement("div",{className:"map-filters-tab ".concat(A?"expanded":""),onClick:function(){return E(!A)}},l.createElement(x,{component:l.createElement(m.A,null),text:"Filters"})),l.createElement("div",{className:"recalls-date-text"},O?l.createElement("p",null,"Loading results..."):l.createElement("p",null,"Showing"," ",l.createElement("strong",null,Math.min(g,(null==k||null===(n=k.recalls)||void 0===n?void 0:n.total_results)||0))," ","of ",l.createElement("strong",null,(null==k||null===(t=k.recalls)||void 0===t?void 0:t.total_results)||0)," recalls from ",i.format("MM/DD/YYYY")," to"," ",d.format("MM/DD/YYYY")))),l.createElement(l.Suspense,{fallback:l.createElement("div",{className:"sidebar-loading"},l.createElement(a.A,null))},l.createElement(te,{recalls:null==k?void 0:k.recalls,expandedState:S,setExpandedState:w})),l.createElement("div",{className:"map-filters-wrapper ".concat(A?"expanded":"")},l.createElement(l.Suspense,{fallback:l.createElement(a.A,null)},l.createElement("div",{className:"map-filters"},l.createElement("p",null,"Filters"),l.createElement(ae,{limit:g,setLimit:T}),l.createElement(re,{startDate:i,endDate:d,setStartDate:function(e){return L(e,d)},setEndDate:function(e){return L(i,e)},popoverProps:{slotProps:{paper:{"aria-modal":!0,role:"dialog",inert:!0,onKeyDown:function(e){"Escape"===e.key&&p(null)}}}}}),l.createElement(le,{selectedClassifications:N,setSelectedClassifications:D})))),l.createElement("div",{className:"recalls-container"},l.createElement(q,{recalls:_,stateBoundsData:Y,selectedClassifications:N,setExpandedState:w,loadingRecallData:O})))}},728:(e,n,t)=>{t.d(n,{t1:()=>l,aM:()=>r,DQ:()=>a,HV:()=>o,C4:()=>i,$n:()=>s});var r=4,a=3,l=[34.5,-98.5795],o={color:"white",fillColor:"orange",fillOpacity:.2,weight:1},i={color:"white",fillColor:"#ffa400",fillOpacity:.7,weight:2};const s={AL:{lat:32.31823,lng:-86.902298,name:"Alabama"},AK:{lat:66.160507,lng:-153.369141,name:"Alaska"},AZ:{lat:34.048927,lng:-111.093735,name:"Arizona"},AR:{lat:34.799999,lng:-92.199997,name:"Arkansas"},CA:{lat:36.778259,lng:-119.417931,name:"California"},CO:{lat:39.113014,lng:-105.358887,name:"Colorado"},CT:{lat:41.599998,lng:-72.699997,name:"Connecticut"},DE:{lat:39,lng:-75.5,name:"Delaware"},FL:{lat:27.994402,lng:-81.760254,name:"Florida"},GA:{lat:33.247875,lng:-83.441162,name:"Georgia"},HI:{lat:19.741755,lng:-155.844437,name:"Hawaii"},ID:{lat:44.068203,lng:-114.742043,name:"Idaho"},IL:{lat:40,lng:-89,name:"Illinois"},IN:{lat:40.273502,lng:-86.126976,name:"Indiana"},IA:{lat:42.032974,lng:-93.581543,name:"Iowa"},KS:{lat:38.5,lng:-98,name:"Kansas"},KY:{lat:37.839333,lng:-84.27002,name:"Kentucky"},LA:{lat:30.39183,lng:-92.329102,name:"Louisiana"},ME:{lat:45.367584,lng:-68.972168,name:"Maine"},MD:{lat:39.045755,lng:-76.641271,name:"Maryland"},MA:{lat:42.407211,lng:-71.382439,name:"Massachusetts"},MI:{lat:44.314844,lng:-85.602364,name:"Michigan"},MN:{lat:46.39241,lng:-94.63623,name:"Minnesota"},MS:{lat:32.354668,lng:-89.398528,name:"Mississippi"},MO:{lat:38.573936,lng:-92.60376,name:"Missouri"},MT:{lat:46.879682,lng:-110.362566,name:"Montana"},NE:{lat:41.5,lng:-100,name:"Nebraska"},NV:{lat:39.876019,lng:-117.224121,name:"Nevada"},NH:{lat:43.193852,lng:-71.572395,name:"New Hampshire"},NJ:{lat:40.058324,lng:-74.405661,name:"New Jersey"},NM:{lat:34.307144,lng:-106.018066,name:"New Mexico"},NY:{lat:43.299428,lng:-74.217933,name:"New York"},NC:{lat:35.782169,lng:-80.793457,name:"North Carolina"},ND:{lat:47.650589,lng:-100.437012,name:"North Dakota"},OH:{lat:40.367474,lng:-82.996216,name:"Ohio"},OK:{lat:35.007752,lng:-97.092877,name:"Oklahoma"},OR:{lat:43.804133,lng:-120.554201,name:"Oregon"},PA:{lat:41.203322,lng:-77.194525,name:"Pennsylvania"},RI:{lat:41.580095,lng:-71.477429,name:"Rhode Island"},SC:{lat:33.836082,lng:-81.163727,name:"South Carolina"},SD:{lat:44.5,lng:-100,name:"South Dakota"},TN:{lat:35.517491,lng:-86.580447,name:"Tennessee"},TX:{lat:31.968599,lng:-99.901813,name:"Texas"},UT:{lat:39.41922,lng:-111.950684,name:"Utah"},VT:{lat:44.558803,lng:-72.577841,name:"Vermont"},VA:{lat:37.431573,lng:-78.656894,name:"Virginia"},WA:{lat:47.751074,lng:-120.740139,name:"Washington"},WV:{lat:38.597626,lng:-80.454903,name:"West Virginia"},WI:{lat:43.78444,lng:-88.787868,name:"Wisconsin"},WY:{lat:43.075968,lng:-107.290284,name:"Wyoming"}}},5963:(e,n,t)=>{t.d(n,{A:()=>l});var r=t(6314),a=t.n(r)()((function(e){return e[1]}));a.push([e.id,".fda-recalls {\r\n  position: relative;\r\n  height: 100vh;\r\n  top: 60px;\r\n}\r\n\r\n.map-filters {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12px;\r\n  justify-content: center;\r\n  align-items: stretch;\r\n  padding: 1rem;\r\n  flex-direction: column;\r\n}\r\n\r\n.map-filters-wrapper {\r\n  width: fit-content;\r\n  background: #fefefee3;\r\n  left: 0;\r\n  right: 0;\r\n  border: 1px solid #ddd;\r\n  border-top: 1px solid #98c6d4;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n  position: fixed;\r\n  bottom: -100%;\r\n  z-index: 1000;\r\n  transition: bottom 0.3s ease-in-out;\r\n  overflow-y: auto;\r\n}\r\n\r\n.map-filters-wrapper.expanded {\r\n  bottom: 0;\r\n}\r\n\r\n.map-filters-tab {\r\n  position: static;\r\n  display: inline-block;\r\n  padding: 25px;\r\n  background-color: white;\r\n  transition: background-color 0.3s ease-in-out;\r\n  border-radius: 4px;\r\n  border: 2px solid rgba(0, 0, 0, 0.2);\r\n  background-clip: padding-box;\r\n  z-index: 1001;\r\n  cursor: pointer;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.map-filters-tab.expanded {\r\n  max-height: 200px;\r\n  background-color: #22517c;\r\n  color: white;\r\n  box-shadow: none;\r\n}\r\n\r\n.fda-recalls {\r\n  position: relative;\r\n  height: 100%;\r\n}\r\n\r\n.recalls-header {\r\n  display: flex;\r\n  align-items: center;\r\n  border: 1px solid #b6daff66;\r\n}\r\n\r\n.map-filters-tab .MuiSvgIcon-root {\r\n  position: absolute;\r\n  transform: translate(-50%, -50%);\r\n}\r\n\r\n.recalls-date-text {\r\n  padding: 15px;\r\n  min-width: 200px;\r\n\r\n  p {\r\n    margin: 0;\r\n  }\r\n}\r\n\r\n.date-range {\r\n  flex: 2;\r\n}\r\n\r\n.date-range p {\r\n  color: #333;\r\n  font-size: 14px;\r\n  margin: 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.date-range strong {\r\n  color: #00468b;\r\n}\r\n\r\n.sidebar-loading {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n  width: 30vw;\r\n  position: fixed;\r\n  right: 0;\r\n  top: 0;\r\n  background-color: white;\r\n  border-right: 1px solid #e0e0e0;\r\n  z-index: 1000;\r\n}",""]);const l=a},1755:(e,n,t)=>{t.d(n,{A:()=>l});var r=t(6314),a=t.n(r)()((function(e){return e[1]}));a.push([e.id,".leaflet-popup-content p {\r\n  margin: 0;\r\n}\r\n\r\n.leaflet-popup-content h4 {\r\n  margin: 0;\r\n}\r\n\r\n.recall-map-container {\r\n  height: 100vh;\r\n  width: 100%;\r\n  position: fixed;\r\n  min-height: 400px;\r\n}\r\n\r\n.recall-map {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.leaflet-control {\r\n  z-index: 1000;\r\n}\r\n\r\n/* dark mode */\r\n/* .leaflet-layer,\r\n.leaflet-control-zoom-in,\r\n.leaflet-control-zoom-out,\r\n.leaflet-control-attribution {\r\n  filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%);\r\n} */",""]);const l=a},1591:(e,n,t)=>{t.d(n,{A:()=>l});var r=t(6314),a=t.n(r)()((function(e){return e[1]}));a.push([e.id,".recall-list {\r\n  margin-top: 10px;\r\n  overflow-y: auto;\r\n  max-height: 200px;\r\n}\r\n\r\n.recall-item {\r\n  padding: 8px 0;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.recall-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.more-recalls {\r\n  text-align: center;\r\n  color: #666;\r\n  font-style: italic;\r\n  margin-top: 8px;\r\n}",""]);const l=a}}]);